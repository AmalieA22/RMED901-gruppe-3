---
title: "RMED901 Group 3 report"
Authors: "Amalie Austgulen, André Høberg, Ariell Thale Toftesund Longva, Ghazal Lessan Toussi"
output: html_document
date: "2022-09-15"
---
This is the report for group 3 in RMED901.


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**Reading and loading the data**
We load the necessary packages first.
```{r}
library(tidyverse)
library(here)
```

We read the non tidy version of the data, that we will try to tidy later.
```{r}
data_nontidy <- read_delim(here("data", "copy_exam_nontidy.txt"))
```

**Exploring the data**
Before tidying, we wished to explore the data. We did this by using functions such as head, tail, summary and glimpse. 
```{r}
head(data_nontidy)
tail(data_nontidy)
```
```{r}
summary(data_nontidy)
```
```{r}
glimpse(data_nontidy)
```


**Wrangling the data**
After tidying, we wished to wrangle it to certain specifications. We individually wrote code to:
-Remove unnecessary columns: row, test_id and demo_group
-Change the variable types
-Create a new set of columns showing whether rec_ver_Tat is higher than 100 or not, showing pan_day in weeks, showing drive_thru_ind as Yes/No and showing the multiplication of ct_result and orderset for each person
-Set the order of columns as: id, age, gender and other columns
-Arrange ID column to increasing numbers
-Join an additional dataset to the main dataset

We then took all our individual code and wrote a pipeline which could do all of this with our tidy data, creating a new data-set in the progress: data_wrangled
```{r}
data_wrangled <- 
  data_tidy %>% 
  select(-row,-"1_test_id", -demo_group) %>% 
  mutate(age = as.numeric(age),
         pan_day = as.numeric(pan_day),
         drive_thru_ind = as.numeric(drive_thru_ind),
         ct_result = as.numeric(ct_result),
         id = as.numeric(id)) %>% 
  mutate(rec_ver_tat= if_else(rec_ver_tat>=100, "High", "Low")) %>% 
  mutate(pan_weeks = pan_day / 7) %>% 
  mutate(drive_thru_ind = if_else(drive_thru_ind == 1, "Yes", "No")) %>% 
  mutate(ct_order_result = ct_result * orderset) %>% 
  select(c(id, age, gender), everything()) %>%
  arrange(id) %>% 
  left_join(data_join)
```

**Exploring the data**
Ariell and Amalie should write about this

**Stratifying the data**
We then stratified the data and reported min, max, mean and sd of a numeric column for a defined set of observations:
-Only inpatients
-Only persons with CT results equal to 45
-Only those tested after the 50th day of the pandemic
Only for those who did not get drive through testing and had a CT result lower than 35

*Only inpatients*
Ariell write this
*CT result equal to 45*
Ghazal write this
*Tested after day 50*
Amalie write this
*Not drive through tested and CT lower than 35*

**Creating a table**
We then created a table from the "gender" and "payor_group" columns.
```{r}
gender_payor_table <- 
  data_wrangled %>%
  with(table(gender, payor_group))
```

**Plots**
We then made a set of plots to investigate some questions:
-If there were more tests in any of the sex groups


EVERYONE SHOULD ADD THEIR PLOT TO THE LIST AND THEN WRITE ABOUT IT UNDER A SUBHEADER

*every "subheader" is in itallics*

**Analysis**
We then analysed the dataset to investigate different questions:
-If there was a difference in distributions of CT results between outcome groups

EVERYONE SHOULD ADD THEIR ANALYSIS TO THE LIST AND THEN WRITE ABOUT IT UNDER A SUBHEADER
